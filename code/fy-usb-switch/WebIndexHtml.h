#ifndef CONFIG_WIFI_HTML_H
#define CONFIG_WIFI_HTML_H
#include <pgmspace.h>
/**
 * 操作页面html代码
 */
const char *web_index_html  = "<!DOCTYPE html><html lang='en'><head><meta charset='UTF-8'><meta http-equiv='Expires'content='0'><meta http-equiv='Pragma'content='no-cache'><meta http-equiv='Cache-Control'content='no-cache'><meta http-equiv='Cache'content='no-cache'><meta name='viewport'content='width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no'><title>飞鱼梦工坊USB开关</title><style>*{margin:0;padding:0}body{font-size:16px;margin:0 15px;z-index:0;background:#8C99A9;color:#2d2d2d}.slsc{width:50px;height:50px}.path{stroke:#409eff;stroke-width:2;stroke-dasharray:95,126;stroke-dashoffset:0;animation:loading-dash 1.5s ease-in-out infinite}@keyframes loading-dash{0%{stroke-dasharray:1,126;stroke-dashoffset:0}50%{stroke-dasharray:95,126;stroke-dashoffset:-31px}to{stroke-dasharray:6,120;stroke-dashoffset:-120px}}.loading{width:60%;height:20%;position:absolute;background:#fff;display:flex;align-items:center;justify-content:space-around;top:30%;left:20%;flex-direction:column;color:#F4606C;border-radius:20px;overflow:hidden;font-size:14px;z-index:999}.box{width:100%;height:100%;position:fixed;background:#ccc;opacity:0.85;margin-left:-15px;display:none}#tip{margin:0 15px;font-size:14px;color:#333;font-weight:500}.scr{display:flex;justify-content:space-between;padding:10px;margin-top:10px;background-color:#ededed;border-radius:10px}.scc{display:flex;flex-direction:column;justify-content:space-between;padding:10px;margin-top:10px;background-color:#ededed;border-radius:10px}.sclt{font-size:18px;font-weight:500;color:#333;display:flex;align-items:center;justify-content:space-between}.scb{background:#6A6DA9;border:1px solid#ededed;border-radius:10px;height:40px;margin:5px;font-size:18px;font-weight:500;letter-spacing:18px}.scb:active{background:#ccc}.spi{display:flex;flex-direction:column;font-weight:500;font-size:26px;text-align:center;color:#333}.spimf{font-size:14px;color:#333}.spilf{font-size:18px;font-weight:500;color:#cccccc}.ssi{display:flex;flex-direction:row;align-items:center;width:48%;background:rgb(225,225,225);border-radius:10px;height:60px}.ssi:active{background:#fff}.ssii{width:40px;height:40px;background:#ededed;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:20px;font-weight:600;color:#333;margin-left:10px}.ssit{margin-left:5px;font-size:16px;font-weight:600;color:#333}.sdti{display:flex;flex-direction:row;width:100%;margin:5px 0;align-items:center;justify-content:space-between}.sdtit{font-size:20px;font-weight:600;color:#333;margin-left:10px;margin-bottom:5px}.soti{display:flex;flex-direction:row;width:100%;margin:5px;align-items:center}.soti input{width:25px;height:25px;margin-right:10px;display:flex;align-items:center;justify-content:center}.sts{width:70%;height:40px;border:1px solid#ededed;border-radius:5px;font-size:18px;font-weight:600;color:#2d2d2d;letter-spacing:1px}.sksi{display:flex;margin:5px 0;align-items:center;justify-content:space-between}.sksir{display:flex;align-items:center}.sksir input{width:25px;height:25px;margin-right:5px}.sksis{display:flex;flex-direction:row;width:100%;margin-bottom:5px}.ssb{display:flex;flex-direction:row;align-items:center;width:100%;font-size:18px}input{width:80%;line-height:30px;font-size:25px;border-top:0;border-left:0;border-right:0;border-bottom:1px solid#ccc}.sdi{display:flex;align-items:center;justify-content:center;margin:15px 0px}#vern{font-weight:500}</style></head><body onload='initD()'><!--显示loading--><div class='box'><div class='loading'><svg viewBox='0 0 50 50'class='slsc'><circle cx='25'cy='25'r='20'fill='none'class='path'></circle></svg><span id='tip'></span></div></div><!--功率信息卡片--><div class='scr'><div class='spi'><div><span class='spv'></span><span class='spimf'>v</span></div><span class='spilf'>电压</span></div><div class='spi'><div><span class='spv'></span><span class='spimf'>mA</span></div><span class='spilf'>电流</span></div><div class='spi'><div><span class='spv'></span><span class='spimf'>w</span></div><span class='spilf'>功率</span></div></div><!--开关控制卡片--><div class='scr'><div class='ssi'onclick='fsC(0)'><span class='ssii'id='shI'></span><span class='ssit'id='sh'></span></div><div class='ssi'onclick='fsC(1)'><span class='ssii'id='shLI'></span><span class='ssit'id='shL'></span></div></div><!--倒计时关闭--><div class='scc'><label class='sclt'><span>倒计时</span><span id='dtV'></span></label><div class='sdti'><div class='ssb'><span>时：</span><select class='sts'id='tdHS'onchange='fdtC(this)'></select></div><div class='ssb'><span>分：</span><select class='sts'id='tdMS'onchange='fdtC(this)'></select></div></div><button class='scb'onclick='fsTDS()'>保存设置</button></div><!--定时开关控制--><div class='scc'><label class='sclt'>定时开启</label><div class='soti'><div><input type='radio'name='tRA'onclick='ftRC(this)'onchange='fsSB(1,false)'/></div><div class='ssb'><span>时：</span><select class='sts'id='toHS'onchange='ftJC(this)'></select></div><div class='ssb'><span>分：</span><select class='sts'id='toMS'onchange='ftJC(this)'></select></div></div><label class='sclt'>定时关闭</label><div class='soti'><div><input type='radio'name='tRB'onclick='ftRC(this)'onchange='fsSB(1,false)'/></div><div class='ssb'><span>时：</span><select class='sts'id='tcHS'onchange='ftJC(this)'></select></div><div class='ssb'><span>分：</span><select class='sts'id='tcMS'onchange='ftJC(this)'></select></div></div><button class='scb'onclick='fsTS()'>保存设置</button></div><!--按键自定义控制卡片--><div class='scc'><label class='sclt'>单击按键</label><div class='sksi'><div class='sksir'><input type='radio'name='kAR'value='0'onclick='fsKT(0,0)'onchange='fsSB(2,false)'/><span>开关</span></div><div class='sksir'><input type='radio'name='kAR'value='1'onclick='fsKT(1,0)'onchange='fsSB(2,false)'/><span>延时开关</span></div><div class='sksir'><input type='radio'name='kAR'value='2'onclick='fsKT(2,0)'onchange='fsSB(2,false)'/><span>开关指示灯</span></div></div><div id='keyaselect'class='sksis'><div class='ssb'><span>时：</span><select class='sts'id='kAHS'onchange='fksC(this)'></select></div><div class='ssb'><span>分：</span><select class='sts'id='kAMS'onchange='fksC(this)'></select></div></div><!--双击按键--><label class='sclt'>双击按键</label><div class='sksi'><div class='sksir'><input type='radio'name='kBR'value='0'onclick='fsKT(0,1)'onchange='fsSB(2,false)'/><span>开关</span></div><div class='sksir'><input type='radio'name='kBR'value='1'onclick='fsKT(1,1)'onchange='fsSB(2,false)'/><span>延时开关</span></div><div class='sksir'><input type='radio'name='kBR'value='2'onclick='fsKT(2,1)'onchange='fsSB(2,false)'/><span>开关指示灯</span></div></div><div id='keybselect'class='sksis'><div class='ssb'><span>时：</span><select class='sts'id='kBHS'onchange='fksC(this)'></select></div><div class='ssb'><span>分：</span><select class='sts'id='kBMS'onchange='fksC(this)'></select></div></div><button class='scb'onclick='fsKS()'>保存设置</button></div><!--重启和恢复出厂设置--><div class='scr'><div class='ssi'onclick='fsC(2)'><span class='ssii'id='rtI'>重</span><span class='ssit'id='rt'>重启设备</span></div><div class='ssi'onclick='fsC(3)'><span class='ssii'id='rstI'>恢</span><span class='ssit'id='rst'>恢复出厂</span></div></div><!--订阅点灯AUTH--><div class='scc'><label class='sclt'><span>绑定点灯SecretKey</span></label><div class='sdi'>SecretKey:<input id='auth'type='text'value=''onchange='atC(this)'/></div><button class='scb'onclick='fsDTH()'>保存设置</button></div><!--固件版本信息--><div class='scr'style='justify-content: start'><span>固件版本：</span><span id='vern'></span></div></body><script type='application/javascript'>const FY_T=0xf1,FY_F=0xf0,VLE='value',D_L='加载数据中！',S_L='数据保存中~~~',T=true,F=false;var downNum=0,timerA=null,timerB=null;var powerData={v:0.00,a:0.00,p:0.00};var shData={enable:FY_F,enableLed:FY_T,version:'v1.0',auth:''};var dtData={closeHour:0,showText:'00:00:00'};var tjData={closeEnable:FY_F,closeHour:0,closeMinute:0,openEnable:FY_F,openHour:0,openMinute:0,};var ksData={click:0,doubleClick:0,clickData:0,doubleClickData:0};function initD(){finitTHS();if(timerA==null){timerA=setInterval(()=>{getPD()},3000)}if(timerB==null){timerB=setInterval(()=>{getDTD()},1000)}showloading(D_L);setTimeout(function(){getAD();finitTHS();hideloading()},1000)}function getById(id){return document.getElementById(id)}function getBC(a){return document.getElementsByClassName(a)}function pI(a){return Number.parseInt(a)}function sAttrBI(a,v){var o=getById(a);o.setAttribute(VLE,v);o[v].setAttribute('selected',T)}function finitTHS(){const h=Array.from({length:24},(_,i)=>i);const m=Array.from({length:60},(_,i)=>i);initS('toHS',h,' 时');initS('toMS',m,' 分');initS('tcHS',h,' 时');initS('tcMS',m,' 分');initS('kAHS',h,' 时');initS('kAMS',m,' 分');initS('kBHS',h,' 时');initS('kBMS',m,' 分');initS('tdHS',h,' 时');initS('tdMS',m,' 分')}function initS(a,d,c){var s=getById(a);var v=pI(s.getAttribute(VLE));var h='';for(var b of d){var i=v===b;h+='<option '+(i?'selected':'')+' value = \"'+b+'\" > '+b+c+'</option > '}s.innerHTML=h}function showloading(msg){getBC('box')[0].style.display='table';getById('tip').innerHTML=msg}function hideloading(){getBC('box')[0].style.display='none';getById('tip').innerHTML=''}function fnEL(){hideloading();showloading('操作失败,请检查网络是否正常！');setTimeout(function(){hideloading()},2000)}function refrerP(){var doms=getBC('spv');doms[0].innerText=Number.parseFloat(powerData.v).toFixed(2);doms[1].innerText=Number.parseFloat(powerData.a).toFixed(2);doms[2].innerText=Number.parseFloat(powerData.p).toFixed(2)}function refrerSw(){getById('rstI').style.background='#FF4500';getById('rst').style.color='#FF4500';getById('rtI').style.background='#4169E1';getById('rt').style.color='#4169E1';let e=shData.enable===FY_T;var ec=e?'#D1BA74':'#19CAAD';var ei=e?'关':'开';var et=e?'关闭':'开启';getById('shI').style.background=ec;getById('shI').innerText=ei;getById('sh').style.color=ec;getById('sh').innerText=et;let el=shData.enableLed===FY_T;var elc=el?'#D1BA74':'#19CAAD';var eli=el?'停':'启';var elt=el?'停用指示灯':'启用指示灯';getById('shLI').style.background=elc;getById('shLI').innerText=eli;getById('shL').style.color=elc;getById('shL').innerText=elt;getById('vern').innerText=shData.version;getById('auth').value=shData.auth}function atC(e){shData.auth=e.value;fsSB(3,F)}function refrerDt(){var s=fiTST(dtData.closeHour);dtData.showText=s;downNum++;getById('dtV').innerText=s;var a=s.split(':');if(pI(a[2])===59||downNum===1){sAttrBI('tdHS',pI(a[0]));sAttrBI('tdMS',pI(a[1]))}}function fdtC(e){sAttrBI(e.id,e.value);fsSB(0,F)}function refrerTj(){sAttrBI('toHS',pI(tjData.openHour));sAttrBI('toMS',pI(tjData.openMinute));sAttrBI('tcHS',pI(tjData.closeHour));sAttrBI('tcMS',pI(tjData.closeMinute));fsRV('tRA',null,tjData.openEnable===FY_F);fsRV('tRB',null,tjData.closeEnable===FY_F)}function ftJC(e){sAttrBI(e.id,e.value);fsSB(1,F)}function refrerKs(){fsRV('kAR',pI(ksData.click),F);fsRV('kBR',pI(ksData.doubleClick),F);fsKT(pI(ksData.click),0);fsKT(pI(ksData.doubleClick),1);var cS=fiTST(ksData.clickData);var a=cS.split(':');sAttrBI('kAHS',pI(a[0]));sAttrBI('kAMS',pI(a[1]));var dS=fiTST(ksData.doubleClickData);var b=dS.split(':');sAttrBI('kBHS',pI(b[0]));sAttrBI('kBMS',pI(b[1]))}function fksC(e){sAttrBI(e.id,e.value);fsSB(2,F)}function fsC(t){let m=0;if(t===0){shData.enable=(shData.enable===FY_T)?FY_F:FY_T}else if(t===1){shData.enableLed=(shData.enableLed===FY_T)?FY_F:FY_T}else if(t===2){if(!confirm('确定要重启设备吗?')){return F}m=98}else if(t===3){if(!confirm('确定要恢复出厂设置吗？设备会清空所有数据，且需要重新配置WIFI网络信息等~')){return F}m=99}var u='/usb/write?p=0&m='+m+'&enable='+shData.enable+'&enableLed='+shData.enableLed;showloading(S_L);fdg(u).then((res)=>{hideloading();refrerSw()},(err)=>{fnEL()})}function fsDTH(){var u='/usb/write?p=0&m=1&auth='+shData.auth;showloading(S_L);fdg(u).then((res)=>{fsSB(3,T);hideloading();refrerSw()},(err)=>{fnEL()})}function fsTDS(){var h=getById('tdHS').getAttribute(VLE);var m=getById('tdMS').getAttribute(VLE);var d=h+':'+m+':00';var dt=fsTTI(d);dtData.showText=d;dtData.closeHour=dt;var u='/usb/write?p=2&m=1&closeHour='+dt;showloading(S_L);fdg(u).then((res)=>{hideloading();refrerDt();fsSB(0,T)},(err)=>{fnEL()})}function fsTS(){var h=getById('toHS').getAttribute(VLE);var m=getById('toMS').getAttribute(VLE);var ch=getById('tcHS').getAttribute(VLE);var cm=getById('tcMS').getAttribute(VLE);var a=document.querySelector('input[name=\"tRA\"]');var b=document.querySelector('input[name=\"tRB\"]');tjData.openEnable=a.checked?FY_T:FY_F;tjData.closeEnable=b.checked?FY_T:FY_F;tjData.openHour=h;tjData.openMinute=m;tjData.closeHour=ch;tjData.closeMinute=cm;var u='/usb/write?p=2&m=0&'+foTU(tjData);showloading(S_L);fdg(u).then((res)=>{hideloading();refrerTj();fsSB(1,T)},(err)=>{fnEL()})}function fsKS(){var h=getById('kAHS').getAttribute(VLE);var m=getById('kAMS').getAttribute(VLE);var ch=getById('kBHS').getAttribute(VLE);var cm=getById('kBMS').getAttribute(VLE);var t=h+':'+m+':00';var cd=fsTTI(t);t=ch+':'+cm+':00';var dd=fsTTI(t);var a=document.querySelector('input[name=\"kAR\"]:checked').getAttribute(VLE);var b=document.querySelector('input[name=\"kBR\"]:checked').getAttribute(VLE);ksData.click=a;ksData.doubleClick=b;ksData.clickData=cd;ksData.doubleClickData=dd;var u='/usb/write?p=3&m=0&'+foTU(ksData);showloading(S_L);fdg(u).then((res)=>{hideloading();refrerKs();fsSB(2,T)},(err)=>{fnEL()})}function ftRC(e){if(e.hasAttribute('checked')){e.removeAttribute('checked');e.checked=F}else{e.setAttribute('checked',T);e.checked=T}}function fsKT(v,t){var id=t===0?'keyaselect':'keybselect';getById(id).style.display=(v===1)?'flex':'none'}function fsSB(index,show){getBC('scb')[index].style.display=(!show)?'':'none'}function fsRV(name,value,checked){var ds=document.querySelectorAll(\"input[name='\"+name+\"']\");var rd=null;if(ds.length>1){for(var d of ds){if(d.getAttribute(VLE)===(value+'')){rd=d;break}}}else{rd=ds[0]}if(checked){rd.removeAttribute('checked');rd.checked=F}else{rd.setAttribute('checked',T);rd.checked=T}}function getAD(){getPD();getED();getDk();getDTD();getTOD();getksData();fsSB(0,T);fsSB(1,T);fsSB(2,T);fsSB(3,T)}function getPD(){var u='/usb/read?p=1&m=0';fdg(u).then((res)=>{powerData=JSON.parse(res);refrerP()},(e)=>{refrerP()})}function getED(){var u='/usb/read?p=0&m=0';fdg(u).then((res)=>{shData=JSON.parse(res);refrerSw()},(e)=>{refrerSw()})}function getDk(){var u='/usb/read?p=0&m=1';fdg(u).then((res)=>{shData.auth=JSON.parse(res).auth;refrerSw()},(e)=>{refrerSw()})}function getDTD(){var u='/usb/read?p=2&m=1';fdg(u).then((res)=>{dtData=JSON.parse(res);refrerDt()},(e)=>{refrerDt()})}function getTOD(){let u='/usb/read?p=2&m=0';fdg(u).then((res)=>{tjData=JSON.parse(res);refrerTj()},(err)=>{refrerTj()})}function getksData(){var u='/usb/read?p=3&m=0';fdg(u).then((res)=>{ksData=JSON.parse(res);refrerKs()},(e)=>{refrerKs()})}function fsTTI(s){var a=s.split(':');var h=pI(a[0]);var m=pI(a[1]);return h*60*60+m*60}function fiTST(n){var h=pI(n/(60*60));var m=pI((n-(h*60*60))/(60));var s=(n-(h*60*60)-(m*60));return(h<10?'0':'')+h+':'+(m<10?'0':'')+m+':'+(s<10?'0':'')+s}function foTU(o){var u='';for(var k in o){if(o.hasOwnProperty(k)){u+=encodeURIComponent(k)+'='+encodeURIComponent(o[k])+'&'}}return u.slice(0,-1)}function fdg(u){return new Promise((resolve,reject)=>{try{var a=new XMLHttpRequest();a.open('get',u);a.send();a.onerror=function(e){reject(e)};a.onreadystatechange=function(){if(a.response){resolve(a.response)}}}catch(e){reject(e)}})}</script></html>";
#endif
